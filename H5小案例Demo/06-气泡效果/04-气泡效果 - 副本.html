<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Document</title>
   <style>
      * {
         margin: 0;
         padding: 0;

      }

      body,html {
         width: 100%;
         height: 100%;
         overflow: hidden;
      }

      canvas {
         position: absolute;
         left: 0;
         top: 0;
         right: 0;
         bottom: 0;
         margin: auto;
         background-color: #fff;
      }
   </style>
</head>

<body>
   <canvas  ></canvas>

   <script>
      window.onload = function () {
         var oc = document.querySelector('canvas');
         // document.body
         oc.width=document.body.offsetWidth
         oc.height = document.body.offsetHeight
         if (oc.getContext) {
            var ctx = oc.getContext('2d');

            var arr = [];

            // 将数组中的圆绘制到画布上

            //
            setInterval(function () {
               ctx.clearRect(0, 0, document.body.offsetWidth, document.body.offsetHeight);
               // 动画
               for (i = 0; i < arr.length; i++) {
                  arr[i].deg+=5;
                  arr[i].x =arr[i].startX + Math.sin(arr[i].deg*Math.PI/180)*arr[i].step*2;
                  arr[i].y = arr[i].startY - (arr[i].deg*Math.PI/180)*arr[i].step*1.5;
                  if(arr[i].y <= 40){arr.splice(i,1)}
                  // console.log(arr)


               }


               // 绘制
               for (i = 0; i < arr.length; i++) {
                  ctx.save();
                  ctx.fillStyle = 'rgba(' + arr[i].red + ',' + arr[i].green + ',' + arr[i].blue + ',' + arr[i].alp + ')';
                  ctx.beginPath();
                  ctx.arc(arr[i].x, arr[i].y, arr[i].r, 0, 2 * Math.PI)
                  ctx.fill();
                  ctx.restore();
               }

            }, 1000/60)

            // 往arr中注入随机圆的信息
            setInterval(function () {
               var r = Math.random()*6+2;
               var x = Math.random() * oc.width;
               var y = oc.height - r;

               var red = Math.round(Math.random() * 255);
               var green = Math.round(Math.random() * 255);
               var blue = Math.round(Math.random() * 255);
               var alp = 1;

               var deg = 0;
               var startX = x;
               var startY = y;
               var step = Math.random()*20+10;

               arr.push({
                  x: x,
                  y: y,
                  r: r,


                  red: red,
                  green: green,
                  blue: blue,
                  alp: alp,

                  deg :deg,
                  startX:startX,
                  startY:startY,
                  step:step

               })
            }, 10)

         }
      }

   </script>
</body>

</html>